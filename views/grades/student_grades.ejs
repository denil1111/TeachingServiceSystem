<!doctype html>
<% include ../head.html %>
</head>
<body>
<!-- 上方选择条 navbar-top-->
<% include ../navbar.html %>
<!-- 侧边框 -->
<% include student_slide.html%>
<script type="text/javascript">
   function setNavActive(){
       var active=document.getElementById('grades');
           active.className='active';
    }

   function setSlideActive(){
        var slide = document.getElementById('sumup');
            slide.className='active';
   }
  function show_sem(choice){
    if(choice==1)           document.getElementById('sem').innerHTML = "秋冬";
    else if(choice==2)      document.getElementById('sem').innerHTML = "春夏";
    else                    document.getElementById('sem').innerHTML = "全部";
    show_table();
  }
  function show_year(year) {
      if(year==-1)
        document.getElementById('year').innerHTML = "全部";
      else
        document.getElementById('year').innerHTML = year + " ~ " + (year+1);
      show_table();
  }
  function show_table(){
    var strSem = document.getElementById('sem').innerHTML;
    var semester; 
    if(strSem=="秋冬")           semester = 1;
    else if(strSem=="春夏")      semester = 2;
    else  /* &nbsp; */          semester = -1;
    
    var strYear = document.getElementById('year').innerHTML;//"20XX~20XY"/"全部";
    var yearNoLimit = strYear=="全部"?1:0;
    
    var cnt = 0;
    var ctable = document.getElementById('contentTable');
    for(var i = 1;i < ctable.rows.length;++i){
      var takecourseID = ctable.rows[i].cells[0].innerHTML;
      var semesterBool = takecourseID[11]==((semester==1)?'1':'2');
      var yearBool = strYear[0]==takecourseID[1] && strYear[1]==takecourseID[2] && strYear[2]==takecourseID[3] && strYear[3]==takecourseID[4];
      if( (semester==-1 && yearNoLimit) ||
          (semesterBool && yearNoLimit) ||
          (semester==-1 && yearBool) ||
          (semesterBool && yearBool)) {  
        ctable.rows[i].style.display = "";
        if(cnt&1)           ctable.rows[i].class = "odd";
        else                ctable.rows[i].class = "even";
        cnt++;
      }
      else ctable.rows[i].style.display = "none";
    }     
  }
     setNavActive();
     setSlideActive();
     show_sem(-1);
     show_year(-1);
</script>
       <!-- 主要内容 -->
<div class="main-content">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="area-top clearfix">
        <div class="pull-left header">
          <h3 class="title"><i class="icon-search"></i>成绩统计</h3>
        </div>
      </div>
    </div>
  </div>
  <!-- 筛选条件 -->
<div class="span12">
      <div class="box">
        <div class="box-header"><span class="title">学生成绩查询</span></div>
         <div class="box-content">
         <div id="dataTables">
                <span>&nbsp;&nbsp;查看</span>
          <div class="btn-group">
            <button class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
              <span id="year">全部</span>
              <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a href="javascript:show_year(-1)">全部</a></li>
                <li><a href="javascript:show_year(2012)"> 2012 ~ 2013</a></li>
                <li><a href="javascript:show_year(2013)"> 2013 ~ 2014</a></li>
                <li><a href="javascript:show_year(2014)"> 2014 ~ 2015</a></li>
              
            </ul>
          </div>
          <span>学年&nbsp;&nbsp;</span>
          <div class="btn-group" id="btn_list">
            <button class="btn btn-default  dropdown-toggle" data-toggle="dropdown">
              
              <span id="sem">全部</span>
              
              
              <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><a href="javascript:show_sem(-1)">全部</a></li>
              <li><a href="javascript:show_sem(1)">秋冬</a></li>
              <li><a href="javascript:show_sem(2)">春夏</a></li>
            </ul>
          </div>
          <span>学期&nbsp;&nbsp;</span>
          <table cellpadding="0" cellspacing="0" border="0" class="dTable responsive" id="contentTable">
          <thead>
            <tr>
              <th><div>选课课号</div></th>
              <th><div>课程名称</div></th>
              <th><div>成绩</div></th>
              <th><div>学分</div></th>
              <th><div>绩点</div></th>
              <th><div>补考成绩</div></th>
            </tr>
          </thead>
          <tbody id="contentbody">
            <% for(i = 0;i<data.length;i++){ %>    
            <tr>       
              <td class="courseid"><%= data[i].courseid %></td>
              <td><%= data[i].coursename %></td>
              <td class="center"><%= data[i].score %></td>
              <td><%= data[i].coursecredit %></td>
              <td><%= data[i].gradePoint %></td>
              <td><%= data[i].secondScore %></td> 
           </tr>
            <%}%> 
          </tbody>
          </table>
         </div>
       </div>
    </div>
  </div>
</div>

</body>
</html>
